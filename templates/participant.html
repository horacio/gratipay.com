{% from 'templates/avatar-url.html' import avatar_img with context %}

{% extends "templates/base.html" %}

{% block sidebar %}

<div class="avatar{% if participant.is_suspicious %} is-suspicious{% endif %}">
    <a href="/{{ participant.username }}/">{{ avatar_img(participant) }}</a>
</div>

{% if user.ADMIN %}
<label class="is-suspicious-knob" data-username="{{ participant.username }}">
    Suspicious
    <input type="checkbox"
        {% if participant.is_suspicious %}checked="true"{% endif %} />
</label>
{% elif participant.is_suspicious %}
<div class="is-suspicious-indicator">Suspicious</div>
{% endif %}

<div class="padding mono">
    {% set prefix = user.participant == participant and "my-" or "" %}
    {% set anon_giving = participant.anonymous_giving %}
    {% set g = participant.giving %}
    {% set anon_receiving = participant.anonymous_receiving %}
    {% set r = participant.receiving %}
    {% set giving_str = '[' + _('hidden') + ']' if anon_giving else format_currency(g, "USD") %}
    {% set receiving_str = '[' + _('hidden') + ']' if anon_receiving else format_currency(r, "USD") %}

    <table>
        <tr>
            <td class="left">{{ _('Gives') }}</td>
            <td class="right">{{ giving_str }}</td>
        </tr>
        <tr>
            <td class="left">{{ _('Receives') }}</td>
            <td class="right">{{ receiving_str if participant.accepts_tips else '&mdash;' }}</td>
        </tr>
    </table>

    <p>{{ _('Joined') }} {{ to_age(participant.claimed_time) }}.</p>
</div>

{% if participant.accepts_tips %}
{% if (user.ANON or (participant != user.participant)) %}
{% include "templates/participant.tip.html" %}
{% endif %}
{% endif %}

{% if participant.username == 'aaronsw' %}
<ul class="nav">
    <li><a href="http://news.ycombinator.com/item?id=5046845">RIP :`(</a></li>
</ul>
<!--

After following Aaron's career for a decade, I interacted with him for the
first time three days before he committed suicide:

    https://twitter.com/aaronsw/status/288664016723791873

:`(

-->
{% endif %}
{% endblock %}
